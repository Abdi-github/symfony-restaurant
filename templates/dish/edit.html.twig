{% extends 'base.html.twig' %}



{% block title %}Edit Dish{% endblock %}

{# {% form_theme createForm 'bootstrap_5_layout.html.twig' %} #}



{% block content %}
<br/>



<div class="container mt-5 ">
    <div class="row"  >
        <div class="col col-md-8 mx-auto ">

            <div class="float-right mb-3">
                <a href="{{path('dish.all')}}" type="button" class="btn btn-dark">Back to dishes</a>

            </div>

            {# {{form(form)}} #}

            {{form_start(form, {'attr': {'novalidate': 'novalidate'}})}}


            
            {{form_end(form)}}


           {# <table class="table table-dark">
			<tbody>
				<tr>
					<th>Id</th>
					<td>{{ dish.id }}</td>
				</tr>
				<tr>
					<th>Category</th>
					<td>{{ dish.category }}</td>
				</tr>
				<tr>
					<th>Name</th>
					<td>{{ dish.name }}</td>
				</tr>
				<tr>
					<th>Descr</th>
					<td>{{ dish.description }}</td>
				</tr>
				<tr>
					<th>Price</th>
					<td>{{ dish.price }}</td>
				</tr>
				<tr>
					<th>Image</th>
					<td>{{ dish.image }}</td>
				</tr>
			
			</tbody>
		</table> #}
{# <form name="dish" method="post" enctype="multipart/form-data">
  <div id="dish">
    <div class="mb-3">
      <label for="dish_name" class="form-label required">Name</label
      ><input
        type="text"
        id="dish_name"
        name="dish[name]"
        required="required"
        maxlength="255"
        class="form-control"
        value="{{dish.name}}"
        
      />
    </div>
    <div class="mb-3">
      <label for="dish_price" class="form-label required">Price</label
      ><input
        type="text"
        id="dish_price"
        name="dish[price]"
        required="required"
        class="form-control"
        value="{{dish.price}}"
      />
    </div>
    <div class="mb-3">
      <label for="dish_description" class="form-label">Description</label
      ><input
        type="text"
        id="dish_description"
        name="dish[description]"
        maxlength="510"
        class="form-control"
        value="{{dish.description}}"
      />
    </div>
    <div class="mb-3">
      <label for="dish_image" class="form-label">Image</label
      ><input
        type="file"
        id="dish_image"
        name="dish[image]"
        required="required"
        class="form-control"
      />

      <div>
        <img id="imgPreview" src="{{asset('uploads/images/' ~ dish.image)}}" style="width:150px; height:150px"  />
      </div>
    </div>
    <div class="mb-3">
      <label class="form-label required" for="dish_category">Category</label
      >

      <select id="dish_category"  name="dish[category]" class="form-select">
                {% for c in categories %} 
                    <option value="{{c.id}}" {{dish.category.name == c.name ? 'selected' : ''}}>{{c.name}}</option>
                {% endfor %}

      </select>


    </div>
    <div class="mb-3">
      <button
        type="submit"
        id="dish_save"
        name="dish[save]"
        class="btn btn-success btn-lg btn"
      >
        Save
      </button>
    </div>
  </div>
</form> #}

 
    <script type="text/javascript">
        $(document).ready(function() {
            $('#dish_image').change(function(e) {
                var reader = new FileReader();
                reader.onload = function(e) {
                    $('#imgPreview').attr('src', e.target.result);
                }
                reader.readAsDataURL(e.target.files['0']);
            });
        });

   
    </script>



{% endblock %}